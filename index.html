<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maya 819-Day Calendar Calculator (Accurate)</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const Calendar = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="16" y1="2" x2="16" y2="6"></line>
                <line x1="8" y1="2" x2="8" y2="6"></line>
                <line x1="3" y1="10" x2="21" y2="10"></line>
            </svg>
        );

        const Clock = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10"></circle>
                <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
        );

        const Info = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="16" x2="12" y2="12"></line>
                <line x1="12" y1="8" x2="12.01" y2="8"></line>
            </svg>
        );

        const ArrowRight = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <line x1="5" y1="12" x2="19" y2="12"></line>
                <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
        );

        const AlertCircle = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="8" x2="12" y2="12"></line>
                <line x1="12" y1="16" x2="12.01" y2="16"></line>
            </svg>
        );

        const Maya819Calculator = () => {
            const [referenceDate, setReferenceDate] = useState(() => {
                const today = new Date();
                return today.toISOString().split('T')[0];
            });
            const [currentCycleInfo, setCurrentCycleInfo] = useState(null);
            const [useDay3Offset, setUseDay3Offset] = useState(false);
            const [showTechnical, setShowTechnical] = useState(false);

            const CYCLE_LENGTH = 819;
            const FULL_SUPER_CYCLE = 20;
            const TOTAL_DAYS = CYCLE_LENGTH * FULL_SUPER_CYCLE; // 16,380 days
            const TOTAL_YEARS = TOTAL_DAYS / 365.25;

            // GMT Correlation: Maya epoch JDN
            const JDN_EPOCH = 584283; // September 6, 3114 BCE (Julian) = August 11, 3114 BCE (Gregorian)

            // Astronomically accurate planetary synodic periods and sync points
            const planets = {
                Mercury: {
                    period: 115.88,
                    syncInterval: 1,
                    syncDays: 819,
                    synodicsAtSync: 7.07,
                    color: 'from-gray-400 to-gray-600'
                },
                Venus: {
                    period: 583.92,
                    syncInterval: 5,
                    syncDays: 4095,
                    synodicsAtSync: 7.01,
                    color: 'from-yellow-300 to-orange-400'
                },
                Saturn: {
                    period: 378.09,
                    syncInterval: 6,
                    syncDays: 4914,
                    synodicsAtSync: 13.0,
                    color: 'from-yellow-600 to-amber-700'
                },
                Jupiter: {
                    period: 398.88,
                    syncInterval: 19,
                    syncDays: 15561,
                    synodicsAtSync: 39.01,
                    color: 'from-orange-400 to-red-500'
                },
                Mars: {
                    period: 779.94,
                    syncInterval: 20,
                    syncDays: 16380,
                    synodicsAtSync: 21.0,
                    color: 'from-red-600 to-red-800'
                }
            };

            // Convert Gregorian date to Julian Day Number (Fliegel-Van Flandern algorithm)
            const gregorianToJDN = (year, month, day) => {
                const a = Math.floor((14 - month) / 12);
                const y = year + 4800 - a;
                const m = month + 12 * a - 3;

                return day +
                    Math.floor((153 * m + 2) / 5) +
                    365 * y +
                    Math.floor(y / 4) -
                    Math.floor(y / 100) +
                    Math.floor(y / 400) -
                    32045;
            };

            const findCurrentCycle = (dateString) => {
                // 1. Parse the input date (Gregorian)
                const current = new Date(dateString);
                const Y = current.getFullYear();
                const M = current.getMonth() + 1;
                const D = current.getDate();

                // 2. Convert Current Date to Julian Day Number
                const JDN_Current = gregorianToJDN(Y, M, D);

                // 3. Calculate exact days elapsed since Maya epoch
                let daysSinceEpoch = JDN_Current - JDN_EPOCH;

                // 4. Apply Day 3 offset if enabled (Palenque Temple of the Cross evidence)
                if (useDay3Offset) {
                    daysSinceEpoch = daysSinceEpoch + 3;
                }

                // 5. Calculate 819-day cycle position
                const cyclePosition = ((daysSinceEpoch % CYCLE_LENGTH) + CYCLE_LENGTH) % CYCLE_LENGTH;
                const daysIntoCycle = cyclePosition;
                const daysUntilNext819 = CYCLE_LENGTH - cyclePosition;

                // Find current 819-day cycle start
                const current819Start = new Date(current);
                current819Start.setDate(current819Start.getDate() - daysIntoCycle);

                const current819End = new Date(current819Start);
                current819End.setDate(current819End.getDate() + CYCLE_LENGTH);

                // 6. Find position within 20-cycle super cycle
                const superCyclePosition = ((daysSinceEpoch % TOTAL_DAYS) + TOTAL_DAYS) % TOTAL_DAYS;
                const currentStationNumber = Math.floor(superCyclePosition / CYCLE_LENGTH) + 1;
                const daysIntoSuperCycle = superCyclePosition;
                const daysUntilSuperCycleEnd = TOTAL_DAYS - superCyclePosition;

                // Find super cycle start (beginning of station 1)
                const superCycleStart = new Date(current);
                superCycleStart.setDate(superCycleStart.getDate() - daysIntoSuperCycle);

                const superCycleEnd = new Date(superCycleStart);
                superCycleEnd.setDate(superCycleEnd.getDate() + TOTAL_DAYS);

                // Calculate which planets are currently in sync
                const planetaryAlignments = Object.entries(planets).map(([name, data]) => {
                    const daysIntoAlignment = superCyclePosition % data.syncDays;
                    const isAligned = daysIntoAlignment === 0;
                    const nextAlignment = data.syncDays - daysIntoAlignment;
                    const currentSynodic = (daysIntoAlignment / data.period).toFixed(2);

                    return {
                        name,
                        ...data,
                        isAligned,
                        daysIntoAlignment,
                        nextAlignment,
                        currentSynodic
                    };
                });

                return {
                    current819Start,
                    current819End,
                    daysIntoCycle,
                    daysUntilNext819,
                    currentStationNumber,
                    superCycleStart,
                    superCycleEnd,
                    daysIntoSuperCycle,
                    daysUntilSuperCycleEnd,
                    yearsIntoSuperCycle: (daysIntoSuperCycle / 365.25).toFixed(2),
                    yearsUntilSuperCycleEnd: (daysUntilSuperCycleEnd / 365.25).toFixed(2),
                    JDN_Current,
                    daysSinceEpoch,
                    planetaryAlignments
                };
            };

            useEffect(() => {
                setCurrentCycleInfo(findCurrentCycle(referenceDate));
            }, [referenceDate, useDay3Offset]);

            const formatDate = (date) => {
                return date.toLocaleDateString('en-US', {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
            };

            if (!currentCycleInfo) return null;

            return (
                <div className="min-h-screen bg-gradient-to-br from-amber-50 to-orange-100 p-4 md:p-8">
                    <div className="max-w-7xl mx-auto">
                        <div className="bg-white rounded-lg shadow-2xl p-4 md:p-8 mb-8">
                            <div className="flex items-center gap-3 mb-6">
                                <Calendar className="w-8 md:w-10 h-8 md:h-10 text-amber-700" />
                                <h1 className="text-2xl md:text-4xl font-bold text-amber-900">
                                    Maya 819-Day Calendar Calculator
                                </h1>
                            </div>

                            <div className="bg-green-50 border-l-4 border-green-600 p-4 mb-6">
                                <div className="flex items-start gap-2">
                                    <Info className="w-5 h-5 text-green-600 mt-1 flex-shrink-0" />
                                    <div className="text-sm text-green-900">
                                        <p className="font-semibold mb-2">✅ Astronomically Accurate Calculator</p>
                                        <p>This calculator uses Julian Day Numbers (JDN) and the GMT correlation (584283) to correctly calculate positions in the Maya 819-day cycle. It accounts for the difference between Julian and Gregorian calendars.</p>
                                    </div>
                                </div>
                            </div>

                            <div className="grid md:grid-cols-2 gap-4 mb-6">
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-2">
                                        Select a date to analyze:
                                    </label>
                                    <input
                                        type="date"
                                        value={referenceDate}
                                        onChange={(e) => setReferenceDate(e.target.value)}
                                        className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500"
                                    />
                                </div>

                                <div className="flex flex-col justify-end">
                                    <label className="flex items-center gap-2 cursor-pointer mb-2">
                                        <input
                                            type="checkbox"
                                            checked={useDay3Offset}
                                            onChange={(e) => setUseDay3Offset(e.target.checked)}
                                            className="w-4 h-4 text-amber-600"
                                        />
                                        <span className="text-sm text-gray-700">
                                            Apply Day 3 offset (Palenque evidence)
                                        </span>
                                    </label>
                                    <label className="flex items-center gap-2 cursor-pointer">
                                        <input
                                            type="checkbox"
                                            checked={showTechnical}
                                            onChange={(e) => setShowTechnical(e.target.checked)}
                                            className="w-4 h-4 text-amber-600"
                                        />
                                        <span className="text-sm text-gray-700">
                                            Show technical details (JDN, calculations)
                                        </span>
                                    </label>
                                </div>
                            </div>

                            {showTechnical && (
                                <div className="bg-gray-50 border border-gray-300 rounded-lg p-4 mb-6 font-mono text-xs">
                                    <h3 className="font-bold text-gray-800 mb-2">Technical Details:</h3>
                                    <div className="space-y-1 text-gray-700">
                                        <p>• Current JDN: {currentCycleInfo.JDN_Current.toLocaleString()}</p>
                                        <p>• Maya Epoch JDN: {JDN_EPOCH.toLocaleString()}</p>
                                        <p>• Days Since Epoch: {currentCycleInfo.daysSinceEpoch.toLocaleString()}</p>
                                        <p>• Day 3 Offset: {useDay3Offset ? 'Applied (+3 days)' : 'Not Applied'}</p>
                                        <p>• Calculation Method: Fliegel-Van Flandern JDN Algorithm</p>
                                        <p>• GMT Correlation: 584283 (Sep 6, 3114 BCE Julian)</p>
                                    </div>
                                </div>
                            )}

                            {/* Current 819-Day Cycle */}
                            <div className="bg-gradient-to-br from-green-50 to-emerald-100 rounded-lg p-6 mb-6">
                                <h2 className="text-xl md:text-2xl font-bold text-emerald-900 mb-4 flex items-center gap-2">
                                    <Clock className="w-6 h-6" />
                                    Your Current 819-Day Station
                                </h2>
                                <div className="space-y-4">
                                    <div className="bg-white/60 rounded p-4">
                                        <p className="text-sm text-emerald-700 mb-1">Station {currentCycleInfo.currentStationNumber} Started:</p>
                                        <p className="text-base md:text-lg font-bold text-emerald-900">{formatDate(currentCycleInfo.current819Start)}</p>
                                    </div>

                                    <div className="bg-white/60 rounded p-4">
                                        <p className="text-sm text-emerald-700 mb-1">Station {currentCycleInfo.currentStationNumber} Ends:</p>
                                        <p className="text-base md:text-lg font-bold text-emerald-900">{formatDate(currentCycleInfo.current819End)}</p>
                                    </div>

                                    <div className="grid grid-cols-2 gap-4">
                                        <div className="bg-emerald-100 rounded p-3">
                                            <p className="text-xs text-emerald-700">Days Into Station:</p>
                                            <p className="text-xl md:text-2xl font-bold text-emerald-900">{currentCycleInfo.daysIntoCycle}</p>
                                        </div>
                                        <div className="bg-emerald-100 rounded p-3">
                                            <p className="text-xs text-emerald-700">Days Until Next:</p>
                                            <p className="text-xl md:text-2xl font-bold text-emerald-900">{currentCycleInfo.daysUntilNext819}</p>
                                        </div>
                                    </div>

                                    <div className="bg-emerald-200/50 rounded p-3">
                                        <div className="flex items-center justify-between mb-2">
                                            <span className="text-sm font-semibold text-emerald-900">Progress:</span>
                                            <span className="text-sm text-emerald-800">
                                                {((currentCycleInfo.daysIntoCycle / CYCLE_LENGTH) * 100).toFixed(1)}%
                                            </span>
                                        </div>
                                        <div className="w-full bg-emerald-200 rounded-full h-3">
                                            <div
                                                className="bg-emerald-600 h-3 rounded-full transition-all duration-500"
                                                style={{ width: `${(currentCycleInfo.daysIntoCycle / CYCLE_LENGTH) * 100}%` }}
                                            ></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Current Super Cycle */}
                            <div className="bg-gradient-to-br from-purple-50 to-violet-100 rounded-lg p-6 mb-6">
                                <h2 className="text-xl md:text-2xl font-bold text-violet-900 mb-4 flex items-center gap-2">
                                    <ArrowRight className="w-6 h-6" />
                                    Your Current 45-Year Super Cycle
                                </h2>
                                <div className="space-y-4">
                                    <div className="bg-white/60 rounded p-4">
                                        <p className="text-sm text-violet-700 mb-1">Super Cycle (Station 1) Started:</p>
                                        <p className="text-base md:text-lg font-bold text-violet-900">{formatDate(currentCycleInfo.superCycleStart)}</p>
                                    </div>

                                    <div className="bg-white/60 rounded p-4">
                                        <p className="text-sm text-violet-700 mb-1">Super Cycle Completes:</p>
                                        <p className="text-base md:text-lg font-bold text-violet-900">{formatDate(currentCycleInfo.superCycleEnd)}</p>
                                    </div>

                                    <div className="grid grid-cols-2 gap-4">
                                        <div className="bg-violet-100 rounded p-3">
                                            <p className="text-xs text-violet-700">Current Station:</p>
                                            <p className="text-xl md:text-2xl font-bold text-violet-900">{currentCycleInfo.currentStationNumber} of 20</p>
                                        </div>
                                        <div className="bg-violet-100 rounded p-3">
                                            <p className="text-xs text-violet-700">Years Into Cycle:</p>
                                            <p className="text-xl md:text-2xl font-bold text-violet-900">{currentCycleInfo.yearsIntoSuperCycle}</p>
                                        </div>
                                    </div>

                                    <div className="bg-violet-200/50 rounded p-3">
                                        <div className="flex items-center justify-between mb-2">
                                            <span className="text-sm font-semibold text-violet-900">Super Cycle Progress:</span>
                                            <span className="text-sm text-violet-800">
                                                {((currentCycleInfo.daysIntoSuperCycle / TOTAL_DAYS) * 100).toFixed(1)}%
                                            </span>
                                        </div>
                                        <div className="w-full bg-violet-200 rounded-full h-3">
                                            <div
                                                className="bg-violet-600 h-3 rounded-full transition-all duration-500"
                                                style={{ width: `${(currentCycleInfo.daysIntoSuperCycle / TOTAL_DAYS) * 100}%` }}
                                            ></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Planetary Alignments - CORRECTED */}
                            <div className="bg-gradient-to-br from-blue-50 to-indigo-100 rounded-lg p-6 mb-6">
                                <div className="flex items-start gap-2 mb-4">
                                    <AlertCircle className="w-6 h-6 text-indigo-700 flex-shrink-0 mt-1" />
                                    <div>
                                        <h2 className="text-xl font-bold text-indigo-900 mb-1">
                                            Planetary Alignments (Corrected Model)
                                        </h2>
                                        <p className="text-sm text-indigo-700">
                                            Planets align at DIFFERENT intervals within the 20-cycle framework, not all at 16,380 days.
                                        </p>
                                    </div>
                                </div>

                                <div className="space-y-3">
                                    {currentCycleInfo.planetaryAlignments.map((planet) => (
                                        <div key={planet.name} className={`bg-gradient-to-r ${planet.color} bg-opacity-10 rounded-lg p-4 border-2 ${planet.isAligned ? 'border-green-500' : 'border-transparent'}`}>
                                            <div className="flex justify-between items-start mb-2">
                                                <div>
                                                    <h3 className="font-bold text-gray-900 flex items-center gap-2">
                                                        {planet.name}
                                                        {planet.isAligned && <span className="text-xs bg-green-500 text-white px-2 py-1 rounded">ALIGNED</span>}
                                                    </h3>
                                                    <p className="text-xs text-gray-700">Synodic period: {planet.period} days</p>
                                                </div>
                                                <div className="text-right text-xs text-gray-700">
                                                    <div>Synodic #{planet.currentSynodic}</div>
                                                </div>
                                            </div>
                                            <div className="text-sm text-gray-800 mb-2">
                                                <strong>Aligns every {planet.syncInterval} stations</strong> ({planet.syncDays.toLocaleString()} days)
                                            </div>
                                            <div className="text-xs text-gray-700 mb-2">
                                                Achieves {planet.synodicsAtSync} complete synodic periods at alignment
                                            </div>
                                            {!planet.isAligned && (
                                                <div className="text-xs text-gray-600">
                                                    Next alignment in {planet.nextAlignment.toLocaleString()} days
                                                </div>
                                            )}
                                        </div>
                                    ))}
                                </div>
                            </div>

                            {/* Tzolk'in Connection */}
                            <div className="bg-gradient-to-br from-pink-50 to-rose-100 rounded-lg p-6 mb-6">
                                <h2 className="text-xl font-bold text-rose-900 mb-4">
                                    Sacred Calendar Connection: The Tzolk'in
                                </h2>
                                <div className="space-y-3">
                                    <div className="bg-white/60 rounded p-4">
                                        <p className="text-sm text-rose-800 mb-2">
                                            The 819-day count brilliantly integrates with the 260-day Tzolk'in (sacred calendar):
                                        </p>
                                        <div className="grid md:grid-cols-2 gap-4 text-sm">
                                            <div className="bg-rose-50 rounded p-3">
                                                <p className="font-bold text-rose-900">20 × 819 days = 16,380 days</p>
                                                <p className="text-xs text-rose-700">Full planetary super cycle</p>
                                            </div>
                                            <div className="bg-rose-50 rounded p-3">
                                                <p className="font-bold text-rose-900">63 × 260 days = 16,380 days</p>
                                                <p className="text-xs text-rose-700">63 Tzolk'in cycles</p>
                                            </div>
                                        </div>
                                        <p className="text-xs text-rose-700 mt-3">
                                            16,380 is the smallest common multiple of 819 and 260, allowing the Tzolk'in day names to realign perfectly at the end of each super cycle.
                                        </p>
                                    </div>

                                    <div className="bg-white/60 rounded p-4">
                                        <h3 className="font-bold text-rose-900 mb-2">The Four-Part Color-Directional Scheme:</h3>
                                        <div className="grid grid-cols-2 md:grid-cols-4 gap-2">
                                            <div className="bg-red-100 border-2 border-red-400 rounded p-2 text-center">
                                                <p className="font-bold text-red-900">East</p>
                                                <p className="text-xs text-red-700">Red</p>
                                            </div>
                                            <div className="bg-gray-100 border-2 border-gray-400 rounded p-2 text-center">
                                                <p className="font-bold text-gray-900">North</p>
                                                <p className="text-xs text-gray-700">White</p>
                                            </div>
                                            <div className="bg-gray-800 border-2 border-gray-900 rounded p-2 text-center">
                                                <p className="font-bold text-white">West</p>
                                                <p className="text-xs text-gray-300">Black</p>
                                            </div>
                                            <div className="bg-yellow-100 border-2 border-yellow-400 rounded p-2 text-center">
                                                <p className="font-bold text-yellow-900">South</p>
                                                <p className="text-xs text-yellow-700">Yellow</p>
                                            </div>
                                        </div>
                                        <p className="text-xs text-rose-700 mt-2">
                                            Each 819-day station was associated with a cardinal direction and color. Earlier research focused on only 4 cycles (3,276 days), which was too short to reveal the full planetary pattern.
                                        </p>
                                    </div>

                                    <div className="bg-white/60 rounded p-4">
                                        <h3 className="font-bold text-rose-900 mb-2">The 63-Day "Master Gear":</h3>
                                        <p className="text-sm text-rose-800 mb-2">
                                            Researchers discovered a 63-day cycle that acts as a mathematical bridge:
                                        </p>
                                        <div className="space-y-1 text-xs text-rose-700">
                                            <p>• 63 × 13 = 819 days (one station)</p>
                                            <p>• 63 × 6 = 378 days (Saturn's synodic period)</p>
                                            <p>• 63 × 260 = 16,380 days (super cycle = 260 Tzolk'in cycles)</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Educational Context */}
                            <div className="bg-amber-50 border-2 border-amber-300 rounded-lg p-4 md:p-6">
                                <h3 className="font-bold text-amber-900 mb-3 text-lg">Understanding the 819-Day System:</h3>
                                <ul className="space-y-2 text-sm text-amber-900">
                                    <li className="flex gap-2">
                                        <span className="font-bold">•</span>
                                        <span>The 819-day count is ONE station in a larger astronomical framework</span>
                                    </li>
                                    <li className="flex gap-2">
                                        <span className="font-bold">•</span>
                                        <span><strong>20 stations (16,380 days ≈ 45 years)</strong> form the complete super cycle</span>
                                    </li>
                                    <li className="flex gap-2">
                                        <span className="font-bold">•</span>
                                        <span><strong>Each planet aligns at different intervals</strong> - Mercury every cycle, Saturn every 6, Jupiter every 19, Mars every 20</span>
                                    </li>
                                    <li className="flex gap-2">
                                        <span className="font-bold">•</span>
                                        <span>The genius: all five visible planets AND the 260-day Tzolk'in achieve perfect alignment within the 20-cycle framework</span>
                                    </li>
                                    <li className="flex gap-2">
                                        <span className="font-bold">•</span>
                                        <span>This was a generational calendar - priests maintained records across lifetimes</span>
                                    </li>
                                    <li className="flex gap-2">
                                        <span className="font-bold">•</span>
                                        <span>Many 819-day inscriptions include the glyph for K'awill (god with smoking mirror), suggesting a link to Jupiter</span>
                                    </li>
                                </ul>

                                <div className="mt-4 pt-4 border-t border-amber-300">
                                    <p className="text-xs text-amber-800 italic">
                                        Based on research by John H. Linden & Victoria R. Bricker (2023), published in Ancient Mesoamerica.
                                        This calculator uses the GMT correlation constant (584283) and Julian Day Numbers for astronomical accuracy.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<Maya819Calculator />, document.getElementById('root'));
    </script>
</body>

</html>