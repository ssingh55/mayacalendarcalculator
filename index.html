<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maya 819 & Accurate Hindu Calendar</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const Calendar = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="16" y1="2" x2="16" y2="6"></line>
                <line x1="8" y1="2" x2="8" y2="6"></line>
                <line x1="3" y1="10" x2="21" y2="10"></line>
            </svg>
        );

        const Clock = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10"></circle>
                <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
        );

        const Info = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="16" x2="12" y2="12"></line>
                <line x1="12" y1="8" x2="12.01" y2="8"></line>
            </svg>
        );

        const ArrowRight = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <line x1="5" y1="12" x2="19" y2="12"></line>
                <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
        );

        const AlertCircle = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="8" x2="12" y2="12"></line>
                <line x1="12" y1="16" x2="12.01" y2="16"></line>
            </svg>
        );

        const Refreshcw = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <polyline points="23 4 23 10 17 10"></polyline>
                <polyline points="1 20 1 14 7 14"></polyline>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
            </svg>
        );

        // --- ICONS FOR VERDICT ---
        const Star = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
            </svg>
        );
        const Shield = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
            </svg>
        );

        const Maya819Calculator = () => {
            const [referenceDate, setReferenceDate] = useState(() => {
                const today = new Date();
                return today.toISOString().split('T')[0];
            });
            const [currentCycleInfo, setCurrentCycleInfo] = useState(null);
            const [useDay3Offset, setUseDay3Offset] = useState(false);
            const [showTechnical, setShowTechnical] = useState(false);
            const [isPurnimanta, setIsPurnimanta] = useState(true); // Default to North India (Purnimanta)

            const CYCLE_LENGTH = 819;
            const FULL_SUPER_CYCLE = 20;
            const TOTAL_DAYS = CYCLE_LENGTH * FULL_SUPER_CYCLE; // 16,380 days
            const TOTAL_YEARS = TOTAL_DAYS / 365.25;

            // GMT Correlation: Maya epoch JDN
            const JDN_EPOCH = 584283; // September 6, 3114 BCE (Julian) = August 11, 3114 BCE (Gregorian)

            // Astronomically accurate planetary synodic periods and sync points
            const planets = {
                Mercury: {
                    period: 115.88,
                    syncInterval: 1,
                    syncDays: 819,
                    synodicsAtSync: 7.07,
                    color: 'from-gray-400 to-gray-600'
                },
                Venus: {
                    period: 583.92,
                    syncInterval: 5,
                    syncDays: 4095,
                    synodicsAtSync: 7.01,
                    color: 'from-yellow-300 to-orange-400'
                },
                Saturn: {
                    period: 378.09,
                    syncInterval: 6,
                    syncDays: 4914,
                    synodicsAtSync: 13.0,
                    color: 'from-yellow-600 to-amber-700'
                },
                Jupiter: {
                    period: 398.88,
                    syncInterval: 19,
                    syncDays: 15561,
                    synodicsAtSync: 39.01,
                    color: 'from-orange-400 to-red-500'
                },
                Mars: {
                    period: 779.94,
                    syncInterval: 20,
                    syncDays: 16380,
                    synodicsAtSync: 21.0,
                    color: 'from-red-600 to-red-800'
                }
            };

            // --- ASTRONOMICAL CONSTANTS & MATH HELPERS ---
            const D2R = Math.PI / 180.0;
            const R2D = 180.0 / Math.PI;

            const normalizeDegrees = (d) => {
                d = d % 360;
                if (d < 0) d += 360;
                return d;
            };

            const sinD = (d) => Math.sin(d * D2R);
            const cosD = (d) => Math.cos(d * D2R);

            // --- HIGH ACCURACY ASTRONOMY FUNCTIONS (Based on Jean Meeus) ---

            const getSunLongitude = (jdn) => {
                const T = (jdn - 2451545.0) / 36525.0;
                let L0 = normalizeDegrees(280.46646 + 36000.76983 * T + 0.0003032 * T * T);
                let M = normalizeDegrees(357.52911 + 35999.05029 * T - 0.0001537 * T * T);
                const C = (1.914602 - 0.004817 * T - 0.000014 * T * T) * sinD(M) +
                    (0.019993 - 0.000101 * T) * sinD(2 * M) +
                    0.000289 * sinD(3 * M);
                return normalizeDegrees(L0 + C);
            };

            const getMoonLongitude = (jdn) => {
                const T = (jdn - 2451545.0) / 36525.0;
                let Lp = 218.3164477 + 481267.88123421 * T;
                let D = 297.8501921 + 445267.1114034 * T;
                let M = 357.5291092 + 35999.0502909 * T;
                let Mp = 134.9633964 + 477198.8675055 * T;
                let F = 93.2720950 + 483202.0175233 * T;

                let SigmaL = 6.2888 * sinD(Mp);
                SigmaL += 1.2740 * sinD(2 * D - Mp);
                SigmaL += 0.6583 * sinD(2 * D);
                SigmaL -= 0.1851 * sinD(M);
                SigmaL -= 0.1143 * sinD(2 * F);

                return normalizeDegrees(Lp + SigmaL);
            };

            const getTithiQuality = (tithiIndex, isShukla) => {
                // Adjust index to 1-15 scale
                const t = tithiIndex > 15 ? tithiIndex - 15 : tithiIndex;

                // Classification (Nanda, Bhadra, Jaya, Rikta, Purna)
                const typeMap = {
                    1: 'Nanda (Joy)', 6: 'Nanda (Joy)', 11: 'Nanda (Joy)',
                    2: 'Bhadra (Good)', 7: 'Bhadra (Good)', 12: 'Bhadra (Good)',
                    3: 'Jaya (Victory)', 8: 'Jaya (Victory)', 13: 'Jaya (Victory)',
                    4: 'Rikta (Empty)', 9: 'Rikta (Empty)', 14: 'Rikta (Empty)',
                    5: 'Purna (Full)', 10: 'Purna (Full)', 15: 'Purna (Full)'
                };

                let quality = 'Neutral';
                let advice = 'Good for routine work.';
                let isGood = true;

                if ([4, 9, 14].includes(t)) {
                    quality = 'Caution (Rikta)';
                    advice = 'Avoid starting important new ventures. Good for debate, cleaning, or surgery.';
                    isGood = false;
                } else if ([5, 10, 15].includes(t)) {
                    quality = 'Excellent (Purna)';
                    advice = 'Highly auspicious for completing tasks and harvest.';
                } else if ([3, 8, 13].includes(t)) {
                    quality = 'Victory (Jaya)';
                    advice = 'Great for overcoming obstacles and competition.';
                } else if (t === 30 || tithiIndex === 30) { // Amavasya
                    quality = 'Ancestral (Amavasya)';
                    advice = 'Rest, meditation, and ancestral offerings. Avoid material beginnings.';
                    isGood = false;
                }

                return { quality, advice, isGood, type: typeMap[t] || 'Special' };
            };

            const getMayaDirectionQuality = (stationNum) => {
                // 4-part rotation: East -> North -> West -> South
                const remainder = (stationNum - 1) % 4;

                switch (remainder) {
                    case 0: return { dir: 'EAST', color: 'Red', meaning: 'Birth/Sunrise', advice: 'Excellent for starting new projects.', isGood: true };
                    case 1: return { dir: 'NORTH', color: 'White', meaning: 'Ancestors/Wisdom', advice: 'Good for planning and seeking counsel.', isGood: true };
                    case 2: return { dir: 'WEST', color: 'Black', meaning: 'Sunset/Underworld', advice: 'Caution. Time for introspection and ending things.', isGood: false };
                    case 3: return { dir: 'SOUTH', color: 'Yellow', meaning: 'Harvest/Zenith', advice: 'Excellent for growth and abundance.', isGood: true };
                    default: return { dir: 'Unknown', color: 'Gray', meaning: '', advice: '', isGood: true };
                }
            };

            const calculateAccurateHinduDate = (jdn, dateObj, isPurnimanta) => {
                const sunLong = getSunLongitude(jdn);
                const moonLong = getMoonLongitude(jdn);

                // Calculate Tithi (12 degree difference)
                let diff = normalizeDegrees(moonLong - sunLong);
                const tithiIndex = Math.floor(diff / 12) + 1; // 1 to 30

                // Determine Paksha
                const isShukla = tithiIndex <= 15;
                const pakshaName = isShukla ? 'Shukla Paksha' : 'Krishna Paksha';
                const displayTithi = isShukla ? tithiIndex : tithiIndex - 15;

                const tithiNames = [
                    'Pratipada', 'Dwitiya', 'Tritiya', 'Chaturthi', 'Panchami',
                    'Shashthi', 'Saptami', 'Ashtami', 'Navami', 'Dashami',
                    'Ekadashi', 'Dwadashi', 'Trayodashi', 'Chaturdashi',
                    isShukla ? 'Purnima' : 'Amavasya'
                ];

                // Rashi Index (0 = Mesha/Aries)
                const rashiIndex = Math.floor(sunLong / 30);

                // Vikram Samvat Year (Approximate base)
                let vikramYear = dateObj.getFullYear() + 57;
                const month = dateObj.getMonth();
                // Adjust year transition roughly around March/April
                if (month < 3) vikramYear -= 1;

                const lunarMonthNames = [
                    'Chaitra', 'Vaisakha', 'Jyeshtha', 'Ashadha',
                    'Shravana', 'Bhadrapada', 'Ashwina', 'Kartika',
                    'Margashirsha', 'Pausha', 'Magha', 'Phalguna'
                ];

                // --- CRITICAL CORRECTION: AMANTA vs PURNIMANTA ---
                // 1. Base Month (Amanta system): Aligns with solar rashi
                let monthIndex = rashiIndex;

                // 2. Purnimanta Shift:
                // In North India (Purnimanta), the month ends on Full Moon.
                // Therefore, the Dark Fortnight (Krishna Paksha) belongs to the NEXT month compared to Amanta.
                if (isPurnimanta && !isShukla) {
                    monthIndex = (monthIndex + 1) % 12;
                }

                return {
                    year: vikramYear,
                    monthName: lunarMonthNames[monthIndex % 12],
                    paksha: pakshaName,
                    tithi: displayTithi,
                    tithiName: tithiNames[displayTithi - 1],
                    tithiIndexFull: tithiIndex,
                    moonPhasePercent: (diff / 360) * 100,
                    sunLong: sunLong.toFixed(2),
                    moonLong: moonLong.toFixed(2),
                    isPurnimantaApplied: isPurnimanta && !isShukla,
                    tithiQuality: getTithiQuality(tithiIndex, isShukla)
                };
            };

            // Convert Gregorian date to Julian Day Number (Fliegel-Van Flandern algorithm)
            const gregorianToJDN = (year, month, day) => {
                const a = Math.floor((14 - month) / 12);
                const y = year + 4800 - a;
                const m = month + 12 * a - 3;

                return day +
                    Math.floor((153 * m + 2) / 5) +
                    365 * y +
                    Math.floor(y / 4) -
                    Math.floor(y / 100) +
                    Math.floor(y / 400) -
                    32045;
            };

            const findCurrentCycle = (dateString) => {
                // 1. Parse the input date (Gregorian)
                const current = new Date(dateString);
                const Y = current.getFullYear();
                const M = current.getMonth() + 1;
                const D = current.getDate();

                // 2. Convert Current Date to Julian Day Number
                const JDN_Current = gregorianToJDN(Y, M, D);

                // 3. Calculate exact days elapsed since Maya epoch
                let daysSinceEpoch = JDN_Current - JDN_EPOCH;

                // 4. Apply Day 3 offset if enabled (Palenque Temple of the Cross evidence)
                if (useDay3Offset) {
                    daysSinceEpoch = daysSinceEpoch + 3;
                }

                // 5. Calculate 819-day cycle position
                const cyclePosition = ((daysSinceEpoch % CYCLE_LENGTH) + CYCLE_LENGTH) % CYCLE_LENGTH;
                const daysIntoCycle = cyclePosition;
                const daysUntilNext819 = CYCLE_LENGTH - cyclePosition;

                // Find current 819-day cycle start
                const current819Start = new Date(current);
                current819Start.setDate(current819Start.getDate() - daysIntoCycle);

                const current819End = new Date(current819Start);
                current819End.setDate(current819End.getDate() + CYCLE_LENGTH);

                // 6. Find position within 20-cycle super cycle
                const superCyclePosition = ((daysSinceEpoch % TOTAL_DAYS) + TOTAL_DAYS) % TOTAL_DAYS;
                const currentStationNumber = Math.floor(superCyclePosition / CYCLE_LENGTH) + 1;
                const daysIntoSuperCycle = superCyclePosition;
                const daysUntilSuperCycleEnd = TOTAL_DAYS - superCyclePosition;

                // Find super cycle start (beginning of station 1)
                const superCycleStart = new Date(current);
                superCycleStart.setDate(superCycleStart.getDate() - daysIntoSuperCycle);

                const superCycleEnd = new Date(superCycleStart);
                superCycleEnd.setDate(superCycleEnd.getDate() + TOTAL_DAYS);

                // Calculate which planets are currently in sync
                const planetaryAlignments = Object.entries(planets).map(([name, data]) => {
                    const daysIntoAlignment = superCyclePosition % data.syncDays;
                    const isAligned = daysIntoAlignment === 0;
                    const nextAlignment = data.syncDays - daysIntoAlignment;
                    const currentSynodic = (daysIntoAlignment / data.period).toFixed(2);

                    return {
                        name,
                        ...data,
                        isAligned,
                        daysIntoAlignment,
                        nextAlignment,
                        currentSynodic
                    };
                });

                // Calculate Accurate Hindu Date (Vikram Samvat)
                const accurateHindu = calculateAccurateHinduDate(JDN_Current, new Date(Y, M - 1, D), isPurnimanta);

                // --- VERDICT LOGIC ---
                const mayaQuality = getMayaDirectionQuality(currentStationNumber);
                let verdict = "Neutral Day";
                let verdictColor = "text-gray-600";
                let verdictBg = "bg-gray-100";

                if (!accurateHindu.tithiQuality.isGood || !mayaQuality.isGood) {
                    verdict = "Use Caution";
                    verdictColor = "text-amber-700";
                    verdictBg = "bg-amber-100";
                    if (!accurateHindu.tithiQuality.isGood && !mayaQuality.isGood) {
                        verdict = "Avoid Major Risks";
                        verdictColor = "text-red-700";
                        verdictBg = "bg-red-100";
                    }
                } else {
                    verdict = "Good Day";
                    verdictColor = "text-blue-700";
                    verdictBg = "bg-blue-100";
                    if (accurateHindu.tithiQuality.quality.includes('Purna') || accurateHindu.tithiQuality.quality.includes('Jaya')) {
                        verdict = "Excellent / Auspicious";
                        verdictColor = "text-green-700";
                        verdictBg = "bg-green-100";
                    }
                }

                return {
                    mayaQuality,
                    verdict,
                    verdictColor,
                    verdictBg,
                    current819Start,
                    current819End,
                    daysIntoCycle,
                    daysUntilNext819,
                    currentStationNumber,
                    superCycleStart,
                    superCycleEnd,
                    daysIntoSuperCycle,
                    daysUntilSuperCycleEnd,
                    yearsIntoSuperCycle: (daysIntoSuperCycle / 365.25).toFixed(2),
                    yearsUntilSuperCycleEnd: (daysUntilSuperCycleEnd / 365.25).toFixed(2),
                    JDN_Current,
                    daysSinceEpoch,
                    planetaryAlignments,
                    vikramSamvat: accurateHindu
                };
            };

            useEffect(() => {
                setCurrentCycleInfo(findCurrentCycle(referenceDate));
            }, [referenceDate, useDay3Offset, isPurnimanta]); // Added isPurnimanta dependency

            const formatDate = (date) => {
                return date.toLocaleDateString('en-US', {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
            };

            if (!currentCycleInfo) return null;

            return (
                <div className="min-h-screen bg-gradient-to-br from-amber-50 to-orange-100 p-4 md:p-8">
                    <div className="max-w-7xl mx-auto">
                        <div className="bg-white rounded-lg shadow-2xl p-4 md:p-8 mb-8">
                            <div className="flex items-center gap-3 mb-6">
                                <Calendar className="w-8 md:w-10 h-8 md:h-10 text-amber-700" />
                                <h1 className="text-2xl md:text-4xl font-bold text-amber-900">
                                    Maya 819 & Vikram Samvat Calculator
                                </h1>
                            </div>



                            <div className="bg-green-50 border-l-4 border-green-600 p-4 mb-6">
                                <div className="flex items-start gap-2">
                                    <Info className="w-5 h-5 text-green-600 mt-1 flex-shrink-0" />
                                    <div className="text-sm text-green-900">
                                        <p className="font-semibold mb-2">‚úÖ Integrated Astronomical System</p>
                                        <p>Combining Julian Day Numbers for Maya calculations and Meeus Algorithms for precise Hindu Tithi & Nakshatra alignments.</p>
                                    </div>
                                </div>
                            </div>

                            <div className="grid md:grid-cols-2 gap-4 mb-6">
                                <div>
                                    <label className="block text-sm font-medium text-gray-700 mb-2">
                                        Select a date to analyze:
                                    </label>
                                    <input
                                        type="date"
                                        value={referenceDate}
                                        onChange={(e) => setReferenceDate(e.target.value)}
                                        className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500"
                                    />
                                </div>

                                <div className="flex flex-col justify-end">
                                    <label className="flex items-center gap-2 cursor-pointer mb-2">
                                        <input
                                            type="checkbox"
                                            checked={useDay3Offset}
                                            onChange={(e) => setUseDay3Offset(e.target.checked)}
                                            className="w-4 h-4 text-amber-600"
                                        />
                                        <span className="text-sm text-gray-700">
                                            Apply Maya Day 3 offset (Palenque)
                                        </span>
                                    </label>
                                    <label className="flex items-center gap-2 cursor-pointer">
                                        <input
                                            type="checkbox"
                                            checked={showTechnical}
                                            onChange={(e) => setShowTechnical(e.target.checked)}
                                            className="w-4 h-4 text-amber-600"
                                        />
                                        <span className="text-sm text-gray-700">
                                            Show astronomical details
                                        </span>
                                    </label>
                                </div>
                            </div>

                            {showTechnical && (
                                <div className="bg-gray-50 border border-gray-300 rounded-lg p-4 mb-6 font-mono text-xs">
                                    <h3 className="font-bold text-gray-800 mb-2">Technical Details:</h3>
                                    <div className="space-y-1 text-gray-700">
                                        <p>‚Ä¢ Current JDN: {currentCycleInfo.JDN_Current.toLocaleString()}</p>
                                        <p>‚Ä¢ Maya Epoch JDN: {JDN_EPOCH.toLocaleString()}</p>
                                        <p>‚Ä¢ Days Since Epoch: {currentCycleInfo.daysSinceEpoch.toLocaleString()}</p>
                                        <p>‚Ä¢ Day 3 Offset: {useDay3Offset ? 'Applied (+3 days)' : 'Not Applied'}</p>
                                        <p>‚Ä¢ Calculation Method: Fliegel-Van Flandern JDN Algorithm</p>
                                        <p>‚Ä¢ GMT Correlation: 584283 (Sep 6, 3114 BCE Julian)</p>
                                    </div>
                                </div>
                            )}

                            {/* --- HINDU CALENDAR SECTION --- */}
                            <div className="bg-gradient-to-br from-orange-50 to-red-100 rounded-lg p-6 mb-6 border border-orange-200">
                                <div className="flex flex-col md:flex-row md:items-center justify-between mb-4 gap-4">
                                    <h2 className="text-xl md:text-2xl font-bold text-orange-900 flex items-center gap-2">
                                        <span className="text-2xl">üïâÔ∏è</span> Vikram Samvat
                                    </h2>

                                    {/* TOGGLE BUTTON */}
                                    <button
                                        onClick={() => setIsPurnimanta(!isPurnimanta)}
                                        className="text-xs flex items-center gap-1 bg-white hover:bg-orange-50 text-orange-900 px-4 py-2 rounded-full border border-orange-300 transition-colors shadow-sm"
                                    >
                                        <Refreshcw className="w-3 h-3" />
                                        Current System: <strong>{isPurnimanta ? 'North (Purnimanta)' : 'South (Amanta)'}</strong>
                                    </button>
                                </div>

                                {/* DATA CARDS */}
                                <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4">
                                    <div className="bg-white/70 p-4 rounded-lg shadow-sm border border-orange-100">
                                        <p className="text-xs text-orange-600 uppercase font-bold tracking-wider">Year</p>
                                        <p className="text-2xl font-bold text-orange-900">{currentCycleInfo.vikramSamvat.year}</p>
                                    </div>
                                    <div className="bg-white/70 p-4 rounded-lg shadow-sm border border-orange-100 relative overflow-hidden">
                                        <p className="text-xs text-orange-600 uppercase font-bold tracking-wider">Masa (Month)</p>
                                        <p className="text-2xl font-bold text-orange-900">{currentCycleInfo.vikramSamvat.monthName}</p>
                                        {currentCycleInfo.vikramSamvat.isPurnimantaApplied && (
                                            <div className="absolute bottom-0 left-0 right-0 bg-orange-200 text-[10px] text-orange-900 text-center py-0.5">
                                                Purnimanta Adjusted
                                            </div>
                                        )}
                                    </div>
                                    <div className="bg-white/70 p-4 rounded-lg shadow-sm border border-orange-100">
                                        <p className="text-xs text-orange-600 uppercase font-bold tracking-wider">Paksha</p>
                                        <p className="text-lg font-bold text-orange-900">{currentCycleInfo.vikramSamvat.paksha}</p>
                                    </div>
                                    <div className="bg-white/70 p-4 rounded-lg shadow-sm border border-orange-100">
                                        <p className="text-xs text-orange-600 uppercase font-bold tracking-wider">Tithi</p>
                                        <p className="text-lg font-bold text-orange-900">
                                            {currentCycleInfo.vikramSamvat.tithiName} <span className="text-sm font-normal text-orange-700">({currentCycleInfo.vikramSamvat.tithi})</span>
                                        </p>
                                    </div>
                                </div>

                                {/* Lunar Phase Visualizer */}
                                <div className="bg-orange-900/5 rounded-lg p-4">
                                    <div className="flex justify-between text-xs text-orange-800 mb-1 uppercase tracking-wider">
                                        <span>Amavasya</span>
                                        <span>Purnima</span>
                                        <span>Amavasya</span>
                                    </div>
                                    <div className="h-4 bg-orange-200 rounded-full relative overflow-hidden">
                                        <div
                                            className="absolute top-0 bottom-0 w-1 bg-orange-800 z-10"
                                            style={{ left: `${currentCycleInfo.vikramSamvat.moonPhasePercent}%` }}
                                        ></div>
                                        <div
                                            className="h-full bg-orange-400 opacity-50 transition-all duration-700"
                                            style={{ width: `${currentCycleInfo.vikramSamvat.moonPhasePercent}%` }}
                                        ></div>
                                    </div>
                                    <div className="mt-2 text-center text-xs text-orange-700 font-mono">
                                        Precise Phase: {currentCycleInfo.vikramSamvat.moonPhasePercent.toFixed(1)}%
                                    </div>
                                </div>

                                {showTechnical && (
                                    <div className="mt-4 p-3 bg-white/50 rounded border border-orange-200 text-xs font-mono text-gray-600">
                                        <p><strong>Astronomical Data (Geocentric Ecliptic Longitude):</strong></p>
                                        <p>Sun: {currentCycleInfo.vikramSamvat.sunLong}¬∞</p>
                                        <p>Moon: {currentCycleInfo.vikramSamvat.moonLong}¬∞</p>
                                        <p>Delta: {normalizeDegrees(currentCycleInfo.vikramSamvat.moonLong - currentCycleInfo.vikramSamvat.sunLong).toFixed(2)}¬∞</p>
                                    </div>
                                )}
                            </div>

                            {/* Current 819-Day Cycle */}
                            <div className="bg-gradient-to-br from-green-50 to-emerald-100 rounded-lg p-6 mb-6">
                                <h2 className="text-xl md:text-2xl font-bold text-emerald-900 mb-4 flex items-center gap-2">
                                    <Clock className="w-6 h-6" />
                                    Maya 819-Day Station
                                </h2>
                                <div className="space-y-4">
                                    <div className="bg-white/60 rounded p-4">
                                        <p className="text-sm text-emerald-700 mb-1">Station {currentCycleInfo.currentStationNumber} of 20</p>
                                        <p className="text-lg font-bold text-emerald-900">
                                            {formatDate(currentCycleInfo.current819Start)} ‚Äî {formatDate(currentCycleInfo.current819End)}
                                        </p>
                                    </div>

                                    <div className="bg-emerald-200/50 rounded p-3">
                                        <div className="flex items-center justify-between mb-2">
                                            <span className="text-sm font-semibold text-emerald-900">Progress:</span>
                                            <span className="text-sm text-emerald-800">
                                                {((currentCycleInfo.daysIntoCycle / CYCLE_LENGTH) * 100).toFixed(1)}%
                                            </span>
                                        </div>
                                        <div className="w-full bg-emerald-200 rounded-full h-3">
                                            <div
                                                className="bg-emerald-600 h-3 rounded-full transition-all duration-500"
                                                style={{ width: `${(currentCycleInfo.daysIntoCycle / CYCLE_LENGTH) * 100}%` }}
                                            ></div>
                                        </div>
                                    </div>

                                    <div className="grid grid-cols-2 gap-4 mt-4">
                                        <div className="bg-white/50 rounded p-3 text-center">
                                            <p className="text-xs text-emerald-700 uppercase font-bold">Days Covered</p>
                                            <p className="text-xl font-bold text-emerald-900">{currentCycleInfo.daysIntoCycle}</p>
                                        </div>
                                        <div className="bg-white/50 rounded p-3 text-center">
                                            <p className="text-xs text-emerald-700 uppercase font-bold">Days to Come</p>
                                            <p className="text-xl font-bold text-emerald-900">{currentCycleInfo.daysUntilNext819}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Current Super Cycle */}
                            <div className="bg-gradient-to-br from-purple-50 to-violet-100 rounded-lg p-6 mb-6">
                                <h2 className="text-xl md:text-2xl font-bold text-violet-900 mb-4 flex items-center gap-2">
                                    <ArrowRight className="w-6 h-6" />
                                    Your Current 45-Year Super Cycle
                                </h2>
                                <div className="space-y-4">
                                    <div className="bg-white/60 rounded p-4">
                                        <p className="text-sm text-violet-700 mb-1">Super Cycle (Station 1) Started:</p>
                                        <p className="text-base md:text-lg font-bold text-violet-900">{formatDate(currentCycleInfo.superCycleStart)}</p>
                                    </div>

                                    <div className="bg-white/60 rounded p-4">
                                        <p className="text-sm text-violet-700 mb-1">Super Cycle Completes:</p>
                                        <p className="text-base md:text-lg font-bold text-violet-900">{formatDate(currentCycleInfo.superCycleEnd)}</p>
                                    </div>

                                    <div className="grid grid-cols-2 gap-4">
                                        <div className="bg-violet-100 rounded p-3">
                                            <p className="text-xs text-violet-700">Current Station:</p>
                                            <p className="text-xl md:text-2xl font-bold text-violet-900">{currentCycleInfo.currentStationNumber} of 20</p>
                                        </div>
                                        <div className="bg-violet-100 rounded p-3">
                                            <p className="text-xs text-violet-700">Years Into Cycle:</p>
                                            <p className="text-xl md:text-2xl font-bold text-violet-900">{currentCycleInfo.yearsIntoSuperCycle}</p>
                                        </div>
                                    </div>

                                    <div className="bg-violet-200/50 rounded p-3">
                                        <div className="flex items-center justify-between mb-2">
                                            <span className="text-sm font-semibold text-violet-900">Super Cycle Progress:</span>
                                            <span className="text-sm text-violet-800">
                                                {((currentCycleInfo.daysIntoSuperCycle / TOTAL_DAYS) * 100).toFixed(1)}%
                                            </span>
                                        </div>
                                        <div className="w-full bg-violet-200 rounded-full h-3">
                                            <div
                                                className="bg-violet-600 h-3 rounded-full transition-all duration-500"
                                                style={{ width: `${(currentCycleInfo.daysIntoSuperCycle / TOTAL_DAYS) * 100}%` }}
                                            ></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Planetary Alignments - CORRECTED */}
                            <div className="bg-gradient-to-br from-blue-50 to-indigo-100 rounded-lg p-6 mb-6">
                                <div className="flex items-start gap-2 mb-4">
                                    <AlertCircle className="w-6 h-6 text-indigo-700 flex-shrink-0 mt-1" />
                                    <div>
                                        <h2 className="text-xl font-bold text-indigo-900 mb-1">
                                            Planetary Alignments (Corrected Model)
                                        </h2>
                                        <p className="text-sm text-indigo-700">
                                            Planets align at DIFFERENT intervals within the 20-cycle framework, not all at 16,380 days.
                                        </p>
                                    </div>
                                </div>

                                <div className="space-y-3">
                                    {currentCycleInfo.planetaryAlignments.map((planet) => (
                                        <div key={planet.name} className={`bg-gradient-to-r ${planet.color} bg-opacity-10 rounded-lg p-4 border-2 ${planet.isAligned ? 'border-green-500' : 'border-transparent'}`}>
                                            <div className="flex justify-between items-start mb-2">
                                                <div>
                                                    <h3 className="font-bold text-gray-900 flex items-center gap-2">
                                                        {planet.name}
                                                        {planet.isAligned && <span className="text-xs bg-green-500 text-white px-2 py-1 rounded">ALIGNED</span>}
                                                    </h3>
                                                    <p className="text-xs text-gray-700">Synodic period: {planet.period} days</p>
                                                </div>
                                                <div className="text-right text-xs text-gray-700">
                                                    <div>Synodic #{planet.currentSynodic}</div>
                                                </div>
                                            </div>
                                            <div className="text-sm text-gray-800 mb-2">
                                                <strong>Aligns every {planet.syncInterval} stations</strong> ({planet.syncDays.toLocaleString()} days)
                                            </div>
                                            <div className="text-xs text-gray-700 mb-2">
                                                Achieves {planet.synodicsAtSync} complete synodic periods at alignment
                                            </div>
                                            {!planet.isAligned && (
                                                <div className="text-xs text-gray-600">
                                                    Next alignment in {planet.nextAlignment.toLocaleString()} days
                                                </div>
                                            )}
                                        </div>
                                    ))}
                                </div>
                            </div>

                            {/* Tzolk'in Connection */}
                            <div className="bg-gradient-to-br from-pink-50 to-rose-100 rounded-lg p-6 mb-6">
                                <h2 className="text-xl font-bold text-rose-900 mb-4">
                                    Sacred Calendar Connection: The Tzolk'in
                                </h2>
                                <div className="space-y-3">
                                    <div className="bg-white/60 rounded p-4">
                                        <p className="text-sm text-rose-800 mb-2">
                                            The 819-day count brilliantly integrates with the 260-day Tzolk'in (sacred calendar):
                                        </p>
                                        <div className="grid md:grid-cols-2 gap-4 text-sm">
                                            <div className="bg-rose-50 rounded p-3">
                                                <p className="font-bold text-rose-900">20 √ó 819 days = 16,380 days</p>
                                                <p className="text-xs text-rose-700">Full planetary super cycle</p>
                                            </div>
                                            <div className="bg-rose-50 rounded p-3">
                                                <p className="font-bold text-rose-900">63 √ó 260 days = 16,380 days</p>
                                                <p className="text-xs text-rose-700">63 Tzolk'in cycles</p>
                                            </div>
                                        </div>
                                        <p className="text-xs text-rose-700 mt-3">
                                            16,380 is the smallest common multiple of 819 and 260, allowing the Tzolk'in day names to realign perfectly at the end of each super cycle.
                                        </p>
                                    </div>

                                    <div className="bg-white/60 rounded p-4">
                                        <h3 className="font-bold text-rose-900 mb-2">The Four-Part Color-Directional Scheme:</h3>
                                        <div className="grid grid-cols-2 md:grid-cols-4 gap-2">
                                            <div className="bg-red-100 border-2 border-red-400 rounded p-2 text-center">
                                                <p className="font-bold text-red-900">East</p>
                                                <p className="text-xs text-red-700">Red</p>
                                            </div>
                                            <div className="bg-gray-100 border-2 border-gray-400 rounded p-2 text-center">
                                                <p className="font-bold text-gray-900">North</p>
                                                <p className="text-xs text-gray-700">White</p>
                                            </div>
                                            <div className="bg-gray-800 border-2 border-gray-900 rounded p-2 text-center">
                                                <p className="font-bold text-white">West</p>
                                                <p className="text-xs text-gray-300">Black</p>
                                            </div>
                                            <div className="bg-yellow-100 border-2 border-yellow-400 rounded p-2 text-center">
                                                <p className="font-bold text-yellow-900">South</p>
                                                <p className="text-xs text-yellow-700">Yellow</p>
                                            </div>
                                        </div>
                                        <p className="text-xs text-rose-700 mt-2">
                                            Each 819-day station was associated with a cardinal direction and color. Earlier research focused on only 4 cycles (3,276 days), which was too short to reveal the full planetary pattern.
                                        </p>
                                    </div>

                                    <div className="bg-white/60 rounded p-4">
                                        <h3 className="font-bold text-rose-900 mb-2">The 63-Day "Master Gear":</h3>
                                        <p className="text-sm text-rose-800 mb-2">
                                            Researchers discovered a 63-day cycle that acts as a mathematical bridge:
                                        </p>
                                        <div className="space-y-1 text-xs text-rose-700">
                                            <p>‚Ä¢ 63 √ó 13 = 819 days (one station)</p>
                                            <p>‚Ä¢ 63 √ó 6 = 378 days (Saturn's synodic period)</p>
                                            <p>‚Ä¢ 63 √ó 260 = 16,380 days (super cycle = 260 Tzolk'in cycles)</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* VERDICT BANNER */}
                            <div className={`p-6 text-center ${currentCycleInfo.verdictBg} rounded-lg mb-8 border-b-4 border-white shadow-md`}>
                                <h2 className="text-sm font-bold uppercase tracking-widest opacity-60 mb-1">Daily Energy Verdict</h2>
                                <p className={`text-3xl font-extrabold ${currentCycleInfo.verdictColor} flex justify-center items-center gap-2`}>
                                    {currentCycleInfo.verdict === "Use Caution" || currentCycleInfo.verdict === "Avoid Major Risks" ? <Shield className="w-8 h-8" /> : <Star className="w-8 h-8" />}
                                    {currentCycleInfo.verdict}
                                </p>
                            </div>

                            {/* SPLIT ANALYSIS */}
                            <div className="grid md:grid-cols-2 gap-4 mb-8">
                                {/* LEFT: HINDU ANALYSIS */}
                                <div className="p-6 bg-orange-50/50 rounded-lg border border-orange-100">
                                    <h3 className="text-xl font-bold text-orange-900 mb-4 flex items-center gap-2">
                                        <span className="text-2xl">üïâÔ∏è</span> Lunar Energy
                                    </h3>

                                    <div className="space-y-4">
                                        <div className="bg-white p-4 rounded-lg shadow-sm">
                                            <p className="text-xs text-orange-600 uppercase font-bold">Tithi (Day)</p>
                                            <p className="text-lg font-bold text-gray-800">{currentCycleInfo.vikramSamvat.tithiName}</p>
                                            <p className="text-sm text-gray-600">{currentCycleInfo.vikramSamvat.paksha}</p>
                                        </div>

                                        <div>
                                            <p className="text-sm font-bold text-gray-700 mb-1">Quality: <span className={currentCycleInfo.vikramSamvat.tithiQuality.isGood ? "text-green-600" : "text-red-600"}>{currentCycleInfo.vikramSamvat.tithiQuality.quality}</span></p>
                                            <p className="text-sm text-gray-600 italic">"{currentCycleInfo.vikramSamvat.tithiQuality.advice}"</p>
                                        </div>

                                        <div className="text-xs text-gray-400 mt-2">
                                            *Avoid new starts on Rikta days (4, 9, 14).
                                        </div>
                                    </div>
                                </div>

                                {/* RIGHT: MAYA ANALYSIS */}
                                <div className="p-6 bg-teal-50/50 rounded-lg border border-teal-100">
                                    <h3 className="text-xl font-bold text-teal-900 mb-4 flex items-center gap-2">
                                        <span className="text-2xl">üèõÔ∏è</span> Solar/Station Energy
                                    </h3>

                                    <div className="space-y-4">
                                        <div className="bg-white p-4 rounded-lg shadow-sm">
                                            <p className="text-xs text-teal-600 uppercase font-bold">Direction & Color</p>
                                            <p className="text-lg font-bold text-gray-800">{currentCycleInfo.mayaQuality.dir} ({currentCycleInfo.mayaQuality.color})</p>
                                            <p className="text-sm text-gray-600">{currentCycleInfo.mayaQuality.meaning}</p>
                                        </div>

                                        <div>
                                            <p className="text-sm font-bold text-gray-700 mb-1">Quality: <span className={currentCycleInfo.mayaQuality.isGood ? "text-green-600" : "text-red-600"}>{currentCycleInfo.mayaQuality.isGood ? "Supportive" : "Challenging"}</span></p>
                                            <p className="text-sm text-gray-600 italic">"{currentCycleInfo.mayaQuality.advice}"</p>
                                        </div>

                                        <div className="text-xs text-gray-400 mt-2">
                                            *West/Black days represent endings.
                                        </div>
                                    </div>
                                </div>

                            </div>
                            {/* Educational Context */}
                            <div className="bg-amber-50 border-2 border-amber-300 rounded-lg p-4 md:p-6">
                                <h3 className="font-bold text-amber-900 mb-3 text-lg">Understanding the 819-Day System:</h3>
                                <ul className="space-y-2 text-sm text-amber-900">
                                    <li className="flex gap-2">
                                        <span className="font-bold">‚Ä¢</span>
                                        <span>The 819-day count is ONE station in a larger astronomical framework</span>
                                    </li>
                                    <li className="flex gap-2">
                                        <span className="font-bold">‚Ä¢</span>
                                        <span><strong>20 stations (16,380 days ‚âà 45 years)</strong> form the complete super cycle</span>
                                    </li>
                                    <li className="flex gap-2">
                                        <span className="font-bold">‚Ä¢</span>
                                        <span><strong>Each planet aligns at different intervals</strong> - Mercury every cycle, Saturn every 6, Jupiter every 19, Mars every 20</span>
                                    </li>
                                    <li className="flex gap-2">
                                        <span className="font-bold">‚Ä¢</span>
                                        <span>The genius: all five visible planets AND the 260-day Tzolk'in achieve perfect alignment within the 20-cycle framework</span>
                                    </li>
                                    <li className="flex gap-2">
                                        <span className="font-bold">‚Ä¢</span>
                                        <span>This was a generational calendar - priests maintained records across lifetimes</span>
                                    </li>
                                    <li className="flex gap-2">
                                        <span className="font-bold">‚Ä¢</span>
                                        <span>Many 819-day inscriptions include the glyph for K'awill (god with smoking mirror), suggesting a link to Jupiter</span>
                                    </li>
                                </ul>

                                <div className="mt-4 pt-4 border-t border-amber-300">
                                    <p className="text-xs text-amber-800 italic">
                                        Based on research by John H. Linden & Victoria R. Bricker (2023), published in Ancient Mesoamerica.
                                        This calculator uses the GMT correlation constant (584283) and Julian Day Numbers for astronomical accuracy.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<Maya819Calculator />, document.getElementById('root'));
    </script>
</body>

</html>